
(function(c){var b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},f=b[Modernizr.prefixed("transition")],a={transitions:Modernizr.csstransitions};function e(h,g){for(var i in g){if(g.hasOwnProperty(i)){h[i]=g[i]}}return h}function d(h,g){this.el=h;this.options=e({},this.options);e(this.options,g);this._init()}d.prototype.options={closeEl:"",onBeforeOpen:function(){return false},onAfterOpen:function(){return false},onBeforeClose:function(){return false},onAfterClose:function(){return false}};d.prototype._init=function(){this.elH=this.el.offsetHeight;this.button=this.el.querySelector("button");this.expanded=false;this.contentEl=this.el.querySelector(".morph-content");this._initEvents()};d.prototype._initEvents=function(){var g=this;this.button.addEventListener("click",function(){g.toggle()});if(this.options.closeEl!==""){var h=this.el.querySelector(this.options.closeEl);if(h){h.addEventListener("click",function(){g.toggle()})}}};d.prototype.toggle=function(){if(this.isAnimating){return false}if(this.expanded){this.options.onBeforeClose()}else{classie.addClass(this.el,"active");this.options.onBeforeOpen()}this.isAnimating=true;var g=this,h=function(i){if(i.target!==this){return false}if(a.transitions){this.removeEventListener(f,h)}g.isAnimating=false;if(g.expanded){classie.removeClass(g.el,"active");g.options.onAfterClose()}else{g.options.onAfterOpen()}g.expanded=!g.expanded};if(a.transitions){this.el.addEventListener(f,h)}else{h()}this.el.style.height=this.expanded?this.elH+"px":this.contentEl.offsetHeight+"px";if(this.expanded){classie.removeClass(this.el,"open")}else{classie.addClass(this.el,"open")}};c.UIMorphingButton=d})(window);